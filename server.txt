-- DROP TABLE VOTACAO;
-- DROP TABLE VOTO;
-- DROP TABLE PARTIDA;
-- DROP TABLE EQUIPE;
-- DROP TABLE USUARIO;

CREATE TABLE USUARIO (
	ID_USUARIO SERIAL,
    SENHA VARCHAR(24) NOT NULL,
    MOEDA INT NOT NULL,
    EMAIL VARCHAR(45) NOT NULL,
    NOME VARCHAR(20) NOT NULL,
    PRIMARY KEY (ID_USUARIO)
);

CREATE TABLE EQUIPE (
	ID_EQUIPE SERIAL,
    NOME VARCHAR(45) NOT NULL,
    TAG VARCHAR(4) NOT NULL,
    VITORIA INT NOT NULL, 
    DERROTA INT NOT NULL,
    POSICAO INT NOT NULL,
    PRIMARY KEY (ID_EQUIPE)
);

CREATE TABLE IF NOT EXISTS PARTIDA (
  ID_PARTIDA INT NOT NULL,
  DATA_JOGO DATE NULL,
  HORA_JOGO TIME NULL,
  ID_EQUIPE_1 INT NOT NULL,
  ID_EQUIPE_2 INT NOT NULL,
  PRIMARY KEY (ID_PARTIDA),
  FOREIGN KEY (ID_EQUIPE_1) REFERENCES EQUIPE (ID_EQUIPE),
  FOREIGN KEY (ID_EQUIPE_2) REFERENCES EQUIPE (ID_EQUIPE)
);

CREATE TABLE VOTO (
	ID_VOTO SERIAL,
    ID_PARTIDA INT,
    QUANTIA_TOTAL_VOTOS_AZUL INT NOT NULL,
    QUANTIA_TOTAL_VOTOS_VERMELHO INT NOT NULL,
    PRIMARY KEY (ID_VOTO),
    FOREIGN KEY (ID_PARTIDA) REFERENCES PARTIDA (ID_PARTIDA)
);

CREATE TABLE VOTACAO (
	ID_VOTO INT NOT NULL,
    ID_USUARIO INT NOT NULL,
	QUANTIA_VOTOS_AZUL INT NOT NULL,
    QUANTIA_VOTOS_VERMELHO INT NOT NULL,
    FOREIGN KEY (ID_VOTO) REFERENCES VOTO (ID_VOTO),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);
